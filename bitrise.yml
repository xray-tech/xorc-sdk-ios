format_version: "5"
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: fastlane
app:
  envs:
  - FASTLANE_XCODE_LIST_TIMEOUT: "120"
  - FASTLANE_WORK_DIR: .
    opts:
      is_expand: false
  - GITHUB_TOKEN: 2c36d11c138ab1ba2f0a7314d995e62f588faa98
    opts:
      is_expand: false
trigger_map:
- pull_request_source_branch: '*'
  pull_request_target_branch: master
  workflow: ci_pull_request
workflows:
  ci_pull_request:
    before_run:
    - swift-lint
    - unit-tests
  swift-lint:
    steps:
    - activate-ssh-key@3.1.1:
        run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
    - git-clone@4.0.11: {}
    - swiftlint@0.4.2:
        inputs:
        - linting_path: $BITRISE_SOURCE_DIR
    - github-status@2.1.0:
        inputs:
        - description: Swift Lint
        - auth_token: $GITHUB_TOKEN
  unit-tests:
    steps:
    - activate-ssh-key@3.1.1:
        run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
    - git-clone@4.0.11: {}
    - fastlane@2.3.12:
        inputs:
        - lane: ios kit_carthage_build
        - work_dir: $FASTLANE_WORK_DIR
    - fastlane@2.3.12:
        inputs:
        - lane: ios kit_test
        - work_dir: $FASTLANE_WORK_DIR
    - github-status@2.1.0:
        inputs:
        - description: Unit Tests
        - auth_token: $GITHUB_TOKEN
